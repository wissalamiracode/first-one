<!DOCTYPE html>
<html>
    <head>

    </head>
<body>
  <form action="" method="post" id="formul">
      <label for="Nom">Nom</label>
      <input type="text" name="nom" required>
      <label for="email">email</label>
      <input type="email" name="email" id="em" required>
      <label for="">message</label>
      <textarea name="mess" cols="50" rows="1"></textarea>
      <input type="submit" value="envoyer" id="submit">


  </form>  
  <script>
      var form=document.getElementById('formul');
      form.onsubmit = function(event) {
      var button=document.getElementById('submit');
     try {
        event.preventDefault();
        button.style.display="none";
        var body = new FormData(form);
      
       fetch('/api',{
    method: 'post',
    body,
  })
    .then(response=>response.json().then(data=> console.log(data)))
    .catch( console.warn )
    .finally( () => 
    button.style.display="block"
    )
  } catch (error) {
        console.warn(error)
     }
   
};



</script>
</body>    
</html>